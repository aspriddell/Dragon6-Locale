os: windows
language: shell

before_script:
  - choco install dotnetcore
  - $VERSION = FOR /F "tokens=*" %F IN (`powershell Get-Date -UFormat "%Y.%m.%d"`) DO SET VERSION=%F
script:
  - dotnet restore ".\DragonFruit.Six.Locale.sln"
  - dotnet pack ".\DragonFruit.Six.Locale\DragonFruit.Six.Locale.csproj" -o "..\" -c Release -p:PackageVersion=%VERSION%.%TRAVIS_BUILD_NUMBER%
  - dotnet push *.nupkg -k %NUGET_KEY% -s "https://api.nuget.org/v3/index.json" --skip-duplicate -n
